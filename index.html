<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Loki Clarke's Stocks & Signals</title>
    <link rel="icon" href="icon.png" />
    <link rel="apple-touch-icon" href="icon.png" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#090909" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
      :root{
        --bg-dark:#090909; --bg-dark-end:#050505; --bg-light:#f6f7fb; --bg-light-end:#f6f7fb;
        --text:#eee; --card:#0f0f0f; --card-end:#0b0b0b; --muted:#9a9a9a; --accent:#00d1ff; --glass: rgba(255,255,255,0.03);
        --skeleton-start:#111; --skeleton-mid:#0b0b0b;
      }
      :root.light{
        --text:#111827; --card: #ffffff; --card-end:#f3f4f6; --muted:#6b7280; --accent:#0b74de; --glass: rgba(0,0,0,0.04);
        --skeleton-start:#e9eef6; --skeleton-mid:#f3f4f6;
        color-scheme: light;
      }
      html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Helvetica,Arial;color:var(--text,#eee);background:none;}
      body{display:flex;min-height:100vh}
      .wrap{flex:1;display:flex;flex-direction:column}
      main{flex:1}
      body{color:var(--text,#eee)}
      .wrap{max-width:1100px;margin:36px auto;padding:24px}
      header{display:flex;align-items:center;justify-content:space-between;gap:16px}
      .brand{display:flex;align-items:center;gap:12px}
      .logo{width:36px;height:36px;border-radius:8px;object-fit:cover;border:1px solid rgba(255,255,255,0.04)}
      h1{font-weight:600;margin:0;font-size:20px}
      .sub{color:var(--muted);font-size:13px}
      .controls{display:flex;gap:12px;align-items:center}
      .theme-toggle{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:8px;color:var(--muted);cursor:pointer;display:inline-flex;align-items:center;gap:8px}
      .theme-toggle .icon{width:18px;height:18px;display:inline-block}
      .theme-toggle .icon-sun{display:none}
      .light .theme-toggle .icon-sun{display:inline-block}
      .light .theme-toggle .icon-moon{display:none}
      .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
      input[type="search"]{background:var(--card);border:1px solid rgba(255,255,255,0.04);padding:10px 12px;border-radius:10px;color:inherit;width:280px}
      /* Smooth theme transition */
      body, header, .card, .controls, input, select, footer, .theme-toggle, .logo { transition: background-color 560ms ease, color 560ms ease, border-color 560ms ease, box-shadow 560ms ease; }
      :root.theme-fade *, .theme-fade * { transition: background-color 560ms ease, color 560ms ease, border-color 560ms ease, box-shadow 560ms ease !important }

      /* layered background crossfade using pseudo-elements */
      body::before, body::after{ content:""; position:fixed; inset:0; z-index:-1; pointer-events:none; transition:opacity 560ms ease; }
      body::before{ background: linear-gradient(180deg,var(--bg-dark),var(--bg-dark-end)); opacity:1 }
      body::after{ background: linear-gradient(180deg,var(--bg-light),var(--bg-light-end)); opacity:0 }
      /* when light mode is active, fade to the light layer */
      .light body::before{ opacity:0 }
      .light body::after{ opacity:1 }
      .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-top:20px}
      .card{background:linear-gradient(180deg,var(--card),var(--card-end));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 20px rgba(0,0,0,0.06);transition:transform .12s,box-shadow .12s}
      .card:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(0,0,0,0.12)}
      .ticker{font-weight:700;font-size:20px}
      .name{color:var(--muted);font-size:14px;margin-top:6px}
      .meta{display:flex;justify-content:space-between;margin-top:10px;align-items:center;gap:8px}
      .price{color:var(--accent);font-weight:700}
      .small{font-size:13px;color:var(--muted)}
      canvas.sparkline{display:block;margin-left:auto;width:80px;height:28px}
      .skeleton{background:linear-gradient(90deg,var(--skeleton-start),var(--skeleton-mid),var(--skeleton-start));height:88px;border-radius:12px}
      footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}
      @media (max-width:480px){.wrap{padding:12px}input[type="search"]{width:160px}.grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="brand">
          <img class="logo" src="icon.png" alt="Loki logo" />
          <div>
            <h1>Loki Clarke's Stocks & Signals</h1>
            <div class="sub">Realtime signals — visually clean, privacy-first</div>
          </div>
        </div>
        <div class="controls">
          <input id="search" type="search" placeholder="Search ticker or name" aria-label="Search signals" />
          <select id="tagFilter" style="background:var(--card);border:1px solid rgba(255,255,255,0.04);color:inherit;padding:8px;border-radius:8px">
            <option value="">All tags</option>
          </select>
          <button id="themeToggle" class="theme-toggle" title="Toggle theme" aria-pressed="false">
            <svg class="icon icon-moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>
            <svg class="icon icon-sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 4V2M12 22v-2M4.22 4.22l-1.42-1.42M20.2 20.2l-1.42-1.42M2 12H4m16 0h2M4.22 19.78l-1.42 1.42M20.2 3.8l-1.42 1.42M12 8a4 4 0 100 8 4 4 0 000-8z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="sr-only">Toggle theme</span>
          </button>
        </div>
      </header>

      <main>
        <div id="stocks" class="grid"></div>
      </main>

      <footer>© 2025 Loki Clarke — This page is updated regularly.<br>Disclaimer: This site is for informational purposes only and does not constitute financial or investment advice. Always do your own research before making investment decisions.</footer>
    </div>
    <script src="local_config.js"></script>
    <script src="viewer_script.js"></script>
    <!-- Detail modal for viewer -->
    <div id="detailModal" style="display:none;position:fixed;inset:0;backdrop-filter:blur(2px);background:rgba(0,0,0,0.6);align-items:center;justify-content:center">
      <div style="background:var(--card);padding:18px;border-radius:12px;max-width:640px;width:92%;box-shadow:0 10px 40px rgba(0,0,0,0.6);">
        <button id="detailClose" style="float:right;background:transparent;border:0;color:var(--muted);font-size:18px">✕</button>
        <h3 id="detailTitle" style="margin:0 0 8px 0">Details</h3>
              <div id="detailContent"></div>
              <style>
                /* make detail chart area more spacious */
                #detailContent .detail-row{display:flex;gap:12px;align-items:center}
                #detailContent .detail-left{flex:1}
                #detailChart{width:100%;height:260px;max-width:520px}
                @media (max-width:520px){ #detailChart{height:200px} }
              </style>
      </div>
    </div>
  </body>
</html>
